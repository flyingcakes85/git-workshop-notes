<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Working with Branches - Git Workshop Notes</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Handout notes for attendees during my workshops on Git">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter_0.html"><strong aria-hidden="true">1.</strong> About the book</a></li><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">2.</strong> Introduction to Git</a></li><li class="chapter-item expanded "><a href="chapter_2.html"><strong aria-hidden="true">3.</strong> Starting with Git</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">4.</strong> Working with Remotes</a></li><li class="chapter-item expanded "><a href="chapter_4.html" class="active"><strong aria-hidden="true">5.</strong> Working with Branches</a></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">6.</strong> Beyond the book</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Git Workshop Notes</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/flyingcakes85/git-workshop-notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                                        <a href="https://github.com/flyingcakes85/git-workshop-notes/edit/main/chapters/chapter_4.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="working-with-branches"><a class="header" href="#working-with-branches">Working with Branches</a></h1>
<p>Git provides the ability to create branches to let developers work on new features or bug fix without disturbing the main code. Changes you make to a branch are stored separately from the other branches. You can switch between branches anytime. When you think you have made enough changes to a branch and the changes are working, you can merge the branch into your <code>main</code> branch.</p>
<h2 id="listing-branches"><a class="header" href="#listing-branches">Listing branches</a></h2>
<p><code>git branch</code> will show you your local branches, and adding the <code>-a</code> flag will also list remote branches.</p>
<pre><code class="language-sh">[snehit@wired my-project]$ git branch
* main
[snehit@wired my-project]$ git branch -a
* main
  remotes/origin/main
</code></pre>
<p>The branch marked with an asterisk denotes the currently active branch. Any changes or commits you make are added on the currently active branch.</p>
<h2 id="creating-and-switching-branches"><a class="header" href="#creating-and-switching-branches">Creating and switching branches</a></h2>
<p><code>git branch &lt;name&gt;</code> creates a new branch. <code>git checkout &lt;name&gt;</code> will switch to the new branch so that further changes are make to the new branch.</p>
<pre><code class="language-sh">git branch add-emotes
git checkout add-emotes
</code></pre>
<p>You can also use the shorthand to create and switch branch in one command. Just use the <code>checkout</code> command with a <code>-b</code> flag.</p>
<pre><code class="language-sh">[snehit@wired my-project]$ git checkout -b add-emotes
Switched to a new branch 'add-emotes'
</code></pre>
<p>You can also <em>checkout</em> an older commit. This will replace the project files with the content that existed at that commit. Run <code>git log --oneline</code> to see the commit hashes.</p>
<pre><code class="language-sh">[snehit@wired my-project]$ git log --oneline
f15f7dc (HEAD -&gt; bugfix, origin/main, main, add-emotes) Update test.py
7e8fc14 Update test.py
9c804c0 Update test.py and add new code
5de911e Add test.py with basic code
</code></pre>
<p>Note the hash of whichever commit you want to checkout. Say, we want to go to the first commit. Its hash is <code>5de911e</code>.</p>
<pre><code class="language-sh">git checkout 5de911e
</code></pre>
<p>This will land you to the first commit. If you see the project now, you will find only one file. Don't worry, our changes aren't lost. We can just switch to <code>main</code> branch to get our changes back.</p>
<pre><code class="language-sh">git checkout main
</code></pre>
<h2 id="working-on-branches---merging-and-stash"><a class="header" href="#working-on-branches---merging-and-stash">Working on branches - merging and stash</a></h2>
<p>You usually create a branch to work on bug or feature without disturbing the actual code. The benefit here is that if there are any urgent changes required to the main code, you can make commits on main without needing to halt working on bug or feature.</p>
<p>There are usually three situations.</p>
<h3 id="fast-forward-merge"><a class="header" href="#fast-forward-merge">Fast-forward merge</a></h3>
<p>First checkout the newly created <code>add-emotes</code> branch.</p>
<pre><code class="language-sh">git checkout add-emotes
</code></pre>
<p>Let's make some changes now.</p>
<pre><code class="language-sh">echo &quot;print(':-)')&quot; &gt;&gt; emotes.py
git add emotes.py
git commit -m &quot;Add emotes&quot;
</code></pre>
<p>You test the code. It works and you are satisfied. So you decide to merge it into main. First checkout <code>main</code> branch then merge the other branch into it.</p>
<pre><code class="language-sh">[snehit@wired my-project]$ git checkout main
Switched to branch 'main'
[snehit@wired my-project]$ git merge add-emotes
Updating f15f7dc..e74906b
Fast-forward
 emotes.py | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 emotes.py
</code></pre>
<p>Notice the phrase <code>Fast-forward</code>. It signifies that no commits were made on main from the time of creating branch <code>add-emotes</code> and the time when we merged it. Git could just &quot;fast-forward&quot; the <code>main</code> branch with commits from <code>add-emotes</code>. You ran use <code>git log --oneline</code> to verify that the commit was indeed applied on <code>main</code> branch too.</p>
<h3 id="recursive-merge"><a class="header" href="#recursive-merge">Recursive merge</a></h3>
<p>Let's do this process again, but we will make a commit on <code>main</code> before merging. Again, checkout <code>add-emotes</code> and make some changes.</p>
<pre><code class="language-sh">git checkout add-emotes
echo &quot;print(':/')&quot; &gt;&gt; emotes.py
</code></pre>
<p>Let's say, you don't want to commit now, as you want to make more changes. But there's an important fix to make on the <code>main</code> branch. You can go forward and switch branch, but it can become messy, because the changes will also show up on main (they are uncommitted) and it will get confusing for you. So, you store the changes to a temporary directory and then make changes on main.</p>
<pre><code class="language-sh">git stash
</code></pre>
<p>Upon running this, you will notice that the line we added to <code>emotes.py</code> is no longer there. Now make changes on main and commit.</p>
<pre><code class="language-sh">git checkout main
echo &quot;print('important bugfix')&quot; &gt;&gt; test.py
git add test.py
git commit -m &quot;Important Bugfix&quot;
</code></pre>
<p>Now, let's switch back to <code>add-emotes</code> branch and complete our code. We use the <code>git stash pop</code> command to bring back the changes we had made earlier.</p>
<pre><code class="language-sh">git checkout add-emotes
git stash pop
echo &quot;print('B-)')&quot; &gt;&gt; emotes.py
git add emotes.py
git commit -S -m &quot;Add more emotes&quot;
</code></pre>
<p>Now, let's switch back to <code>main</code> branch and try merging <code>add-emotes</code>.</p>
<pre><code class="language-sh">git checkout main
git merge add-emotes
</code></pre>
<p>This will land you in your text editor, with the following text.</p>
<pre><code>Merge branch 'add-emotes'
# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
#
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit.
</code></pre>
<p>This is very much like making a commit. There was already a commit made on to <code>main</code> before we merged the branch. So, git cannot simply fast-forward. Save this file and exit. You should get this message.</p>
<pre><code>Merge made by the 'recursive' strategy.
 emotes.py | 2 ++
 1 file changed, 2 insertions(+)
</code></pre>
<p>This time, it was not fast forwarded. Git used a different strategy called recursive.</p>
<h3 id="merge-conflict"><a class="header" href="#merge-conflict">Merge conflict</a></h3>
<p>Finally, if you change the same line of the same file in both branch then try to merge them, you run into a merge conflict. Let's quickly add different text to the same file on both <code>main</code> branch and <code>add-emotes</code> branch.</p>
<pre><code class="language-sh">git checkout main
echo &quot;print('added via main')&quot; &gt;&gt; test.py
git add test.py
git commit -m &quot;Make program better&quot;
git checkout add-emotes
echo &quot;print('added via add-emotes')&quot; &gt;&gt; test.py
git add test.py
git commit -m &quot;Make program fancy&quot;
</code></pre>
<p>If you see the contents of <code>test.py</code>, you won't see the line <code>print('added via main')</code>. If you checkout <code>main</code>, then you won't see <code>print('added via add-emotes')</code>. So, what we have got is different content at same location in two branches. This will lead to a conflict.</p>
<p>First checkout <code>main</code> branch.</p>
<pre><code class="language-sh">git checkout main
</code></pre>
<p>Let's now merge it and see what happens.</p>
<pre><code class="language-sh">[snehit@wired my-project]$ git merge add-emotes
Auto-merging test.py
CONFLICT (content): Merge conflict in test.py
Automatic merge failed; fix conflicts and then commit the result.
</code></pre>
<p>Git bailed out saying it cannot merge - as we expected.</p>
<p>When you get a merge conflict, you shouldn't need to panic. It's not an &quot;error&quot;. It only indicates that git is unable to decide which copy of the code to keep, because the two branches have different changes for the same file location.</p>
<p>Git is telling us that there is a conflict in <code>test.py</code>. Let's open that file and see what's there.</p>
<pre><code>print('Hello World')
print('Another line')

print('Added via GitHub web')
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
print('important bugfix')
print('added via main')
=======
print('added via add-emotes')
&gt;&gt;&gt;&gt;&gt;&gt;&gt; add-emotes
</code></pre>
<p>Here, you can see the conflicting part between angled brackets. From <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> to <code>=======</code> are the contents that are in <code>main</code>. From <code>=======</code> to <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; add-emotes</code> are the contents that are in <code>add-emotes</code>. You can freely remove one of them, along with the angled brackets and equal signs. You may also just remove the brackets and equal signs in case you want to keep changes from both branches. Finally, you may remove it to add some other code altogether. It's all up to you.</p>
<p>Let's say, I remove the code from <code>main</code>. So my file should now look like this.</p>
<pre><code>print('Hello World')
print('Another line')

print('Added via GitHub web')

print('added via add-emotes')
</code></pre>
<p>Now we can continue on to adding file and committing it.</p>
<pre><code class="language-sh">git add test.py
git commit -m &quot;Merge add-emotes into main&quot;
</code></pre>
<p>This will create the merge commit.</p>
<h2 id="deleting-branches"><a class="header" href="#deleting-branches">Deleting branches</a></h2>
<p>You may want to delete a branch if you have merged it into <code>main</code>, and it is no longer needed. Or maybe you decided against incorporating the changes from that branch. In these cases, you can delete the branch.</p>
<pre><code class="language-sh">git branch -d &lt;name&gt;
</code></pre>
<p>If you had published a branch you now want to delete, run this command</p>
<pre><code class="language-sh">git push origin --delete &lt;branch name&gt;
</code></pre>
<p>Run these commands with care, as you may accidentally delete one of the important branches.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="chapter_3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="chapter_5.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="chapter_3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="chapter_5.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
